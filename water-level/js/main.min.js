function updateTable(){$.ajax({url:"track-table.cfm",success:function(e){$("#table-div").html(e)},error:function(){$("#table-div").text("Currently unable to retreive tabular data.")}})}function filterWells(e){var a="";"all"!==e&&(a="MEASUREMENT_STATUS = "+e),wellsLayer.setDefinitionExpression(a)}function toggleTable(){$("#map-pane").hasClass("col-md-9")?($("#table-pane").hide(),$("#map-pane").removeClass("col-md-9"),$("#map-pane").addClass("col-md-12")):($("#table-pane").show(),$("#map-pane").removeClass("col-md-12"),$("#map-pane").addClass("col-md-9")),map.resize(),map.reposition()}var map;require(["esri/map","esri/dijit/Scalebar","application/bootstrapmap","esri/dijit/LocateButton","dojo/dom-construct","esri/layers/FeatureLayer","esri/dijit/PopupMobile","esri/dijit/PopupTemplate","esri/InfoTemplate","esri/renderers/UniqueValueRenderer","esri/symbols/PictureMarkerSymbol","dojo/domReady!"],function(e,a,s,r,t,i,l,o,p,n,c){var m=new l(null,t.create("div")),d=new p("${LOCAL_WELL_NUMBER}","<b>USGS ID:</b> ${USGS_ID}<br><b>ACCESS:</b> ${WELL_ACCESS}");map=s.create("map-div",{basemap:"topo",center:[-101,38.5],zoom:8,logo:!1,infoWindow:m});var b=(new a({map:map,scalebarUnit:"dual"}),new r({map:map},"geolocator-btn"));b.startup(),routesLayer=new esri.layers.ArcGISDynamicMapServiceLayer("http://services.kgs.ku.edu/arcgis/rest/services/water_well_sampling/ww_sampling/MapServer"),routesLayer.setVisibleLayers([1,2,3,4]),wellsLayer=new i("http://services.kgs.ku.edu/arcgis/rest/services/water_well_sampling/ww_sampling/MapServer/0",{mode:i.MODE_ONDEMAND,infoTemplate:d,outFields:["*"]}),map.addLayers([routesLayer,wellsLayer]);var g=new c("http://static.arcgis.com/images/Symbols/NPS/npsPictograph_0077b.png",20,25),S=new n(g,"MEASUREMENT_STATUS");S.addValue("-9999",new c("http://static.arcgis.com/images/Symbols/Shapes/BlueSquareLargeB.png",35,35)),S.addValue("1",new c("http://static.arcgis.com/images/Symbols/Shapes/GreenCircleLargeB.png",35,35)),S.addValue("0",new c("http://static.arcgis.com/images/Symbols/Shapes/RedDiamondLargeB.png",35,35)),wellsLayer.setRenderer(S)}),$(document).ready(function(){updateTable(),$("#basemapList li").click(function(e){switch(e.target.text){case"Streets":map.setBasemap("streets");break;case"Imagery":map.setBasemap("hybrid");break;case"National Geographic":map.setBasemap("national-geographic");break;case"Topographic":map.setBasemap("topo");break;case"Gray":map.setBasemap("gray");break;case"Open Street Map":map.setBasemap("osm")}}),$("#routes-chkbox").change(function(){routesLayer.visible?routesLayer.hide():routesLayer.show()}),$(":radio").change(function(e){switch(e.target.value){case"notvisited":filterWells("-9999");break;case"measured":filterWells("1");break;case"utm":filterWells("0");break;case"all":filterWells("all")}})});